language: c
  
os:
  - windows

compiler:
  - gcc
  
before_install:
  #- 
  
before_script:
  #there is no need to configure build toolchain since the platform on travis CI  
  #is windows and will come prebuilt with powershell, .NET platform, VBS and Batch

script:
  - ./CronuxTestRunner.bat
  - ./Cronux.bat genbuild $(./Cronux.bat version)
  - ls ./build/$(./Cronux.bat version)/
  
deploy:
  provider: releases
  skip_cleanup: true
  api_key: $GITHUB_TOKEN
  file_glob: true
  file:
    - "build/$(./Cronux.bat version)/Cronux.bat"
    - "build/$(./Cronux.bat version)/Cronux.$(./Cronux.bat version).zip"
  on:
    tags: true
